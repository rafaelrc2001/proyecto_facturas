<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Scanalyze</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600&family=Orbitron:wght@500;700&family=Roboto:wght@400;500&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../../CSS/general.css" />
    <link rel="stylesheet" href="../../CSS/menu.css" />
    <link rel="stylesheet" href="../../CSS/imprimir.css" />
 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="icon" href="../../img/inxiteblanco.png" type="image/png" />
  </head>
  <body>
    <div class="app-container">
      <!-- Sidebar -->
      <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
         <h2 class="logo-container">
   <i class="ri-line-chart-line logo-icon" style="color:#FF6F00; font-size:1em;"></i>
    
          <span class="logo-text">Scanalyze</span>
 </h2>
          <button class="collapse-btn" id="sidebarToggle">
            <i class="ri-menu-line menu-icon"></i>
            <i class="ri-arrow-right-s-line collapse-icon"></i>
          </button>
        </div>
          
          <nav class="sidebar-nav">
          <ul>
            <li >
             <a href="../Dashboard/dashboard.html">
                <i class="ri-pie-chart-2-line"></i>
                <span>Dashboard</span>
              </a>
            </li>
            <li class="active">
              <a href="../registros/registros.html">
                <i class="ri-archive-line"></i>
                <span>Reportes</span>
              </a>
            </li>
             <li>
                <a href="../gastos/gastos.html">
                  <i class="ri-money-dollar-circle-line"></i>
                  <span>Gastos</span>
                </a>
            </li>
          </ul>
        </nav>


        <div class="sidebar-footer">
          <div class="user-profile">
           <!-- ...existing code... -->
          <div class="avatar"></div>
          <div class="user-info">
            <span class="name"></span>
            <span class="role"></span>
          </div>
          <!-- ...existing code... -->
          </div>
          <button class="logout-btn">
            <i class="ri-logout-box-r-line"></i>
          </button>
        </div>
      </aside>

      <!-- Main Content -->
      <main class="main-content">
      
<header class="main-header" style="background: #f7f8f6; box-shadow: none; padding: 0px 0 0px 0;"></header> 

<div style="width: 100%; display: flex; justify-content: flex-start; margin: 0;">
    <div style="
      background: #fff;
      border-radius:  3; /* Solo arriba si quieres esquinas redondeadas */
      box-shadow: 0 2px 12px rgba(0,59,92,0.07);
      padding: 18px 32px 12px 32px;
      width: 100%;
      margin-left: 0;
      display: flex;
      align-items: center;
      border: 1px solid #ececec;
     border-bottom: 7px solid #003B5C;
      gap: 12px;
    ">
      <div style="
        width: 40px;
        height: 40px;
        border-radius: 12px;
        background: #003B5C;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 8px rgba(255,111,0,0.08);
        flex-shrink: 0;
        margin-left: 0;
        margin-right: 0px;
      ">
        <i class="ri-file-list-2-line" style="font-size: 1.5rem; color:#f7f7f7"></i>
      </div>
      <div style="display: flex; flex-direction: column; align-items: flex-start; margin-left: 0;">
        <h1 style="
          font-size: 1.5rem;
          font-family: 'Montserrat', sans-serif;
          font-weight: 700;
          color: #003B5C;
          margin-bottom: 5px;
          text-align: left;
        ">
          Registros de Facturas y Tickets
        </h1>
        <div class="header-subtitle" style="
          font-size: 0.8rem;
          color: #276080;
          font-weight: 600;
          text-align: left;
          margin-bottom: 0;
        ">
          Busca tu proyecto para generar el reporte
        </div>
      </div>
    </div>
  </div>
</header>

        <!-- Cards Section -->


        <!-- Registros Table -->
        <section class="permits-table">
         

              <div class="table-header-flex" id="imprimir-header-flex">
                <div class="filtro-boton-flex">
                  <div id="imprimir-filtro-container">
                    <div class="autocomplete-container" id="imprimir-autocomplete-container">
                      <input type="text" id="imprimir-proyecto-autocomplete" placeholder="Filtrar por proyecto..." autocomplete="off" />
                      <div id="imprimir-autocomplete-list" class="autocomplete-list"></div>
                    </div>
                  </div>
                  <button class="btn primary" id="imprimir-descargar-csv">
                    <i class="ri-download-line"></i> Descargar
                  </button>
                </div>
              </div>



<div class="tabla-container" style="border-top: 5px solid #FF6F00; border-radius: 2px;">




      <div id="imprimir-proyecto-info" class="proyecto-info"></div>
               <!-- ...ya tienes el filtro y la tabla debajo... -->

          <div class="table-container" id="imprimir-table-container">
              <table id="imprimir-facturas-table">
                <thead>
                  <tr>
                    <th>Fecha de cargo</th>
                    <th>Fecha de Facturación</th>
                    <th>Folio</th>
                    <th>Establecimiento</th>
                    <th>Importe</th>
                  </tr>
                </thead>
                <tbody id="imprimir-table-body">
                  <!-- Se llenará dinámicamente con JS -->
                </tbody>
              </table>
            </div>

            <!-- Paginación y contador -->
            <div class="table-footer" id="imprimir-table-footer">
      

              <span id="imprimir-contador-registros"></span>
            </div>
          </div>

        
          </div>
        </section>
      </main>
    </div>

    <!-- Modal de detalle -->
    <div id="modal-ver" class="modal" style="display: none">
      <div class="modal-content executive-view">
        <!-- Header del Modal -->
        <div class="modal-header">
          <div class="permit-title">
            <h2 id="modal-tipo-documento">DETALLE DEL DOCUMENTO</h2>
            <div class="permit-number" id="modal-numero">No. Documento</div>
          </div>
          <span class="close-modal">&times;</span>
        </div>
        <div id="modal-detalle"></div>
      </div>
    </div>



    <!-- Modal Editar Gasto (nuevo formato) -->
<div id="modal-editar-gasto" class="modal" style="display:none;">
  <div id="editar-modal-content">
       <span class="modal-close" id="close-modal-editar">&times;</span>
    <h2 class="modal-title" id="editar-modal-title">Editar gasto</h2>
    <div class="modal-title-line" id="editar-modal-title-line"></div>
    <form id="form-editar-gasto">
      <div class="modal-form-grid" id="editar-form-grid">
        <div class="modal-form-group" id="grupo-fecha-cargo">
          <label for="editar-fecha_cargo" id="label-fecha-cargo">Fecha de cargo</label>
          <input type="date" id="editar-fecha_cargo" name="fecha_cargo" required>
        </div>
        <div class="modal-form-group" id="grupo-fecha-facturacion">
          <label for="editar-fecha_facturacion" id="label-fecha-facturacion">Fecha de Facturación</label>
          <input type="date" id="editar-fecha_facturacion" name="fecha_facturacion" required>
        </div>
        <div class="modal-form-group" id="grupo-tipo">
          <label for="editar-tipo" id="label-tipo">Tipo</label>
          <select id="editar-tipo" name="tipo" required>
            <option value="" disabled selected>Selecciona tipo</option>
            <option value="ticket">Ticket</option>
            <option value="factura">Factura</option>
          </select>
        </div>
        <div class="modal-form-group" id="grupo-pago">
          <label for="editar-pago" id="label-pago">Tipo de pago</label>
          <select id="editar-pago" name="pago" required>
            <option value="" disabled selected>Selecciona tipo de pago</option>
            <option value="Pagos con tarjeta facturados.">Pagos con tarjeta facturados.</option>
            <option value="Pagos con tarjeta tickets">Pagos con tarjeta tickets</option>
            <option value="Pagos con efectivo retiro tarjeta facturados.">Pagos con efectivo retiro tarjeta facturados.</option>
            <option value="Pagos con efectivo retiro tarjeta  tickets.">Pagos con efectivo retiro tarjeta  tickets.</option>
            <option value="Pagos efectivo retiro tarjeta sin comprobante">Pagos efectivo retiro tarjeta sin comprobante</option>
            <option value="Pagos efectivo (caja) tickets">Pagos efectivo (caja) tickets</option>
            <option value="Pago efectivo (caja) sin comprobante">Pago efectivo (caja) sin comprobante</option>
          </select>
        </div>
        <div class="modal-form-group" id="grupo-folio">
          <label for="editar-folio" id="label-folio">Folio</label>
          <input type="text" id="editar-folio" name="folio" >
        </div>
        <div class="modal-form-group" id="grupo-establecimiento">
          <label for="editar-establecimiento" id="label-establecimiento">Establecimiento</label>
          <input type="text" id="editar-establecimiento" name="establecimiento" required>
        </div>
        <div class="modal-form-group" id="grupo-importe">
          <label for="editar-importe" id="label-importe">Importe</label>
          <input type="text" id="editar-importe" name="importe" required pattern="^\d+([.,]\d{1,2})?$">
        </div>
        <div class="modal-form-group autocomplete-container" id="grupo-proyecto">
          <label for="editar-proyecto-autocomplete" id="label-proyecto">Proyecto</label>
          <input type="text" id="editar-proyecto-autocomplete" placeholder="Buscar proyecto..." autocomplete="off" required>
          <div id="editar-autocomplete-list" class="autocomplete-list"></div>
        </div>
        <div class="modal-form-group" id="grupo-documentos">
          <label for="editar-documentos" id="label-documentos">Documento</label>
          <input type="file" id="editar-documentos" name="documentos" accept="image/*,.pdf,.doc,.docx">
        </div>
      </div>
      <div class="modal-actions" id="editar-modal-actions">
        <button type="submit" class="btn primary" id="btn-guardar-editar">Guardar</button>
        <button type="button" class="btn" id="cancelar-modal-editar">Cancelar</button>
      </div>
    </form>
    
  </div>
</div>
    <script type="module" src="registros.js"></script>
    <script type="module" src="imprimir.js"></script>
    <script src="../../Js/menu.js"></script>
    <script src="https://cdn.sheetjs.com/xlsx-0.19.3/package/dist/xlsx.full.min.js"></script>

<!-- ...existing code... -->
<div id="print-area" style="display:none"></div>
<!-- ...existing code... -->



<!-- Modal para preguntas -->
<div id="modalPreguntas" class="modal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.3); justify-content:center; align-items:center; z-index:1000;">
  <div class="modal-content modal-proyecto" style="max-width:600px; min-width:550px; padding:32px 32px 24px 32px; border-radius:18px; box-shadow:0 4px 24px rgba(0,59,92,0.12); position:relative; background:#fff;">
    <button id="cerrarModalPreguntas" class="modal-close" type="button" style="position:absolute; top:18px; right:18px; background:none; border:none; font-size:1.5em; cursor:pointer;">
      <i class="ri-close-line"></i>
    </button>
    <h2 class="modal-title" style="font-family:Montserrat,sans-serif; font-size:2rem; color:#003B5C; margin-bottom:8px;">Responde las siguientes preguntas</h2>
    <div class="modal-title-line" style="height:4px; background:#FF6F00; border-radius:2px; margin-bottom:24px;"></div>
    <form id="formPreguntas">
      <div class="modal-form-grid" style="display:grid; grid-template-columns:1fr 1fr; gap:24px 32px; margin-bottom:24px;">
        <div class="modal-form-group" style="display:flex; flex-direction:column;">
          <label for="respuesta1" style="font-weight:600; color:#276080; margin-bottom:6px;">Vehículo Utilizado</label>
          <input type="text" id="respuesta1" name="respuesta1"  style="padding:10px 12px; border:1.5px solid #ececec; border-radius:8px; background:#f7f8f6; font-size:1em;">
        </div>
        <div class="modal-form-group" style="display:flex; flex-direction:column;">
          <label for="respuesta2" style="font-weight:600; color:#276080; margin-bottom:6px;">Personal que viaticó</label>
          <input type="text" id="respuesta2" name="respuesta2"  style="padding:10px 12px; border:1.5px solid #ececec; border-radius:8px; background:#f7f8f6; font-size:1em;">
        </div>
      </div>
      <div class="modal-actions" style="display:flex; justify-content:flex-end; gap:16px;">
        <button type="submit" class="btn primary" style="background:#FF6F00; color:#fff; border:none; padding:12px 32px; border-radius:8px; font-size:1.1em; font-weight:700; cursor:pointer;">Continuar</button>
        <button type="button" class="btn" id="cancelarModalPreguntas" style="background:#f7f8f6; color:#003B5C; border:none; padding:12px 32px; border-radius:8px; font-size:1.1em; font-weight:600; cursor:pointer;">Cancelar</button>
      </div>
</div>

  </body>
</html>
